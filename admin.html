<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Admin Dashboard</title>
    <style>
      body{font-family:Arial,Helvetica,sans-serif;background:#f6f7f9;margin:0;padding:20px}
      .card{max-width:1000px;margin:20px auto;background:#fff;padding:18px;border-radius:10px;box-shadow:0 6px 20px rgba(0,0,0,0.06)}
      .muted{color:#6b7280}
      .btn{background:#ff6b35;color:#fff;border:none;padding:8px 12px;border-radius:8px;cursor:pointer}
      table{width:100%;border-collapse:collapse}
      th,td{padding:8px;border-bottom:1px solid #eee;text-align:left}
    </style>
  </head>
  <body>
    <div class="card">
      <h1>Admin — Student Progress</h1>
  <p class="muted">Pastors progress in CSS self-assesment</p>
  <div style="margin-top:12px" id="summary"></div>
      <h3 style="margin-top:14px">Details</h3>
      <table id="details">
        <thead><tr><th>Metric</th><th>Value</th></tr></thead>
        <tbody></tbody>
      </table>
      <div style="margin-top:12px"><a class="btn" href="course-tracks.html">Open Course Tracks</a> <a class="btn" href="dashboard.html">Back to Dashboard</a></div>
    </div>

    <script>
      const raw = localStorage.getItem('assessmentResults');
      const summary = document.getElementById('summary');
      const tbody = document.querySelector('#details tbody');
      if(!raw){
        summary.innerHTML = '<div class="muted">No assessment results saved yet.</div>';
      } else {
        const data = JSON.parse(raw);
        summary.innerHTML = `<div style="font-weight:700">Total Questions: ${data.totalQuestions || 0} — Answered: ${data.answered || 0}</div>`;
        tbody.innerHTML = '';
        // Show answered counts per COC (answered_coc1..4) and timestamp
        for(let c=1;c<=4;c++){
          const key = `answered_coc${c}`;
          const tr = document.createElement('tr');
          tr.innerHTML = `<td>COC${c} answered</td><td>${data[key] || 0}</td>`;
          tbody.appendChild(tr);
        }
        if(data.timestamp){
          const d = new Date(data.timestamp);
          const tr = document.createElement('tr'); tr.innerHTML = `<td>Submitted</td><td>${d.toLocaleString()}</td>`; tbody.appendChild(tr);
        }
      }
    </script>
  </body>
</html>